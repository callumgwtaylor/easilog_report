{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Easilog Report\"\nauthor: \"Callum Taylor\"\ndate: \"30 January 2017\"\noutput:\n  html_document:\n    theme: \"cerulean\"\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\nlibrary(tidyverse)\nlibrary(lubridate)\nadmissions <- read_csv(\"ignore/Admissions.csv\")\ncpd  <- read_csv(\"ignore/CPD Activities.csv\")\nprocedures <- read_csv(\"ignore/Procedures.csv\")\n\nadmissions$Hospital <- as.factor(admissions$Hospital)\nprocedures$Procedure <- as.factor(procedures$Procedure)\ncpd$`Type of CPD Activity` <- as.factor(cpd$`Type of CPD Activity`)\nprocedures[] <- lapply(procedures, gsub, pattern = \"\\n\", replacement = \"\", fixed = TRUE)\ncpd[] <- lapply(cpd, gsub, pattern = \"\\n\", replacement = \" \", fixed = TRUE)\ncpd$`Type of CPD Activity` <- as.factor(cpd$`Type of CPD Activity`)\nadmissions[] <- lapply(admissions, gsub, pattern = \"\\n\", replacement = \"\", fixed = TRUE)\ncolnames(cpd)[1] <- \"date\"\ncpd$date <- dmy(cpd$date)\ncolnames(admissions)[1] <- \"date\"\nadmissions$date <- dmy(admissions$date)\n```\n\n## Intensive Care CT2\n\n### Admissions Clerked In\n```{r admissions, echo=FALSE}\nicu_admissions <- admissions %>%\n  filter(Role == 'Clerked') %>%\n  select(date, Problem, `Referral source`, Notes)\nicu_admissions <- icu_admissions[order(icu_admissions$date),]\n```\n```{r admissions_table, echo=FALSE, results='asis'}\nknitr::kable(icu_admissions)\n```\n\n### Patients Reviewed Outside The Unit\n```{r reviews, echo=FALSE}\nicu_reviews <- admissions %>%\n  filter(Role != 'Clerked') %>%\n  select(date, Problem, Setting, `Referral source`, Outcome, Notes)\nicu_reviews <- icu_reviews[order(icu_reviews$date),]\n```\n```{r reviews_table, echo=FALSE, results='asis'}\nknitr::kable(icu_reviews)\n```\n\n### Teaching Attended\n```{r teaching_notes, echo=FALSE}\nteaching_notes <- cpd %>%\n  filter(`Type of CPD Activity` == \"Course\" | `Type of CPD Activity` == \"Seminar\" | `Type of CPD Activity` == \"Training Day\" | `Type of CPD Activity` == \"Conference attended\" | `Type of CPD Activity` == \"Training event attended\")\ncolnames(teaching_notes)[1] <- \"date\"\ncolnames(teaching_notes)[2] <- \"type\"\ncolnames(teaching_notes)[3] <- \"title\"\ncolnames(teaching_notes)[5] <- \"notes\"\nteaching_notes <- teaching_notes[order(teaching_notes$date),]\n```\n```{r teaching_table, echo = FALSE, results='asis'}\nknitr::kable(teaching_notes)\n```\n\n### Teaching Provided, Audits Completed, Presentations\n```{r cpd_notes, echo=FALSE}\n# This section looks at teaching sessions provided, plus other CPD\ncpd_notes <- cpd %>%\n  filter(`Type of CPD Activity` == \"Undergraduate teaching delivered\" | `Type of CPD Activity` == \"Audit complteted\" | `Type of CPD Activity` == \"Presentation\")\ncolnames(cpd_notes)[1] <- \"date\"\ncolnames(cpd_notes)[2] <- \"type\"\ncolnames(cpd_notes)[3] <- \"title\"\ncolnames(cpd_notes)[5] <- \"notes\"\ncpd_notes <- cpd_notes[order(cpd_notes$date),]\n```\n```{r cpd_table, echo = FALSE, results='asis'}\nknitr::kable(cpd_notes)\n```\n\n\n### Procedures and counts\n```{r list_procedures, echo=FALSE}\nprocedure_count <- procedures %>%\n  group_by(Procedure) %>%\n  mutate(count = n()) %>%\n  select(Procedure, count) %>%\n  distinct(.keep_all = TRUE)\nprocedure_count <- procedure_count[order(procedure_count$Procedure),]\nprocedure_count <- as.data.frame(procedure_count)\n```\n```{r table_procedures, echo = FALSE, results='asis'}\nknitr::kable(procedure_count)\n```\n\n#### Arrest Notes\n```{r arrest_table, echo=FALSE}\n# This section looks at notes for arrests recorded\narrest_notes <- procedures %>%\n  filter(Procedure == \"Advanced Life Support (CPR)\")\ncolnames(arrest_notes)[1] <- \"entry_date\"\narrest_notes <- arrest_notes %>%\n  select(entry_date, Procedure, Supervision, Setting, Gender, Age, Notes)\narrest_notes$entry_date <- dmy(arrest_notes$entry_date)\narrest_notes <- arrest_notes[order(arrest_notes$entry_date),]\n```\n```{r arrest_notes, echo=FALSE, results='asis'}\nknitr::kable(arrest_notes)\n```\n\n\n\n",
    "created" : 1485802583917.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3236359613",
    "id" : "8C4F051E",
    "lastKnownWriteTime" : 1485830003,
    "last_content_update" : 1485830003970,
    "path" : "C:/Users/callu/Dropbox/Medicine/GATE/QEUH/easilog_report/easilog_report.Rmd",
    "project_path" : "easilog_report.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}